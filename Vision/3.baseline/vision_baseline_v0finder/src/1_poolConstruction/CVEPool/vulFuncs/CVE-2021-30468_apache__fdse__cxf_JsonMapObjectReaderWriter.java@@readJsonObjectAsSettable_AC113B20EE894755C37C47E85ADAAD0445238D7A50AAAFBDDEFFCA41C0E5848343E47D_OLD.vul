for(inti=0;i<json.length();i++)if(character.iswhitespace(json.charat(i)))continue;intclosingquote=json.indexof(dquote,i+1);intfrom=json.charat(i)==dquote?i+1:i;stringname=json.substring(from,closingquote);intsepindex=json.indexof(colon,closingquote+1);intj=1;while(character.iswhitespace(json.charat(sepindex+j)))j++;if(json.charat(sepindex+j)==object_start)intclosingindex=getclosingindex(json,object_start,object_end,sepindex+j);stringnewjson=json.substring(sepindex+j+1,closingindex);mapsettablenextmap=newmapsettable();readjsonobjectassettable(nextmap,newjson);values.put(name,nextmap.map);i=closingindex+1;elseif(json.charat(sepindex+j)==array_start)intclosingindex=getclosingindex(json,array_start,array_end,sepindex+j);stringnewjson=json.substring(sepindex+j+1,closingindex);values.put(name,internalfromjsonaslist(name,newjson));i=closingindex+1;elseintcommaindex=getcommaindex(json,sepindex+j);objectvalue=readprimitivevalue(name,json,sepindex+j,commaindex);values.put(name,value);i=commaindex+1;