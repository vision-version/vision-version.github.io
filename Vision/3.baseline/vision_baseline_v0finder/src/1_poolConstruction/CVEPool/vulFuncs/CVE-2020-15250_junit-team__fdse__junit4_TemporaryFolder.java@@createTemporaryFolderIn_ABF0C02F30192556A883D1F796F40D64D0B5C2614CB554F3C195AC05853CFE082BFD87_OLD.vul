filecreatedfolder=null;for(inti=0;i<temp_dir_attempts;++i)stringsuffix=".tmp";filetmpfile=file.createtempfile(tmp_prefix,suffix,parentfolder);stringtmpname=tmpfile.tostring();stringfoldername=tmpname.substring(0,tmpname.length()-suffix.length());createdfolder=newfile(foldername);if(createdfolder.mkdir())tmpfile.delete();returncreatedfolder;tmpfile.delete();thrownewioexception("unabletocreatetemporarydirectoryin:"+parentfolder.tostring()+".tried"+temp_dir_attempts+"times."+"lastattemptedtocreate:"+createdfolder.tostring());