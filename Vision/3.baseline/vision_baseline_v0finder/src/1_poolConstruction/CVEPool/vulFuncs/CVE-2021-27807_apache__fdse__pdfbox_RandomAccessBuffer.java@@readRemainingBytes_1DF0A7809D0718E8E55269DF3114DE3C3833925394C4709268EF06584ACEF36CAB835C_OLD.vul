if(pointer>=size)return0;intmaxlength=(int)math.min(length,size-pointer);intremainingbytes=chunksize-currentbufferpointer;if(remainingbytes==0)return0;if(maxlength>=remainingbytes)system.arraycopy(currentbuffer,currentbufferpointer,b,offset,remainingbytes);currentbufferpointer+=remainingbytes;pointer+=remainingbytes;returnremainingbytes;elsesystem.arraycopy(currentbuffer,currentbufferpointer,b,offset,maxlength);currentbufferpointer+=maxlength;pointer+=maxlength;returnmaxlength;