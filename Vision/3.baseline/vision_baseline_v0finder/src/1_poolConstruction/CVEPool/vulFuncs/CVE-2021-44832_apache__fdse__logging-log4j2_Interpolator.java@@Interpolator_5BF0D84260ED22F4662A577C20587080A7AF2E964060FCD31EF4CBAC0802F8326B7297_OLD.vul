this.defaultlookup=defaultlookup==null?newmaplookup(newhashmap<string,string>()):defaultlookup;finalpluginmanagermanager=newpluginmanager(category);manager.collectplugins(pluginpackages);finalmap<string,plugintype<?>>plugins=manager.getplugins();for(finalmap.entry<string,plugintype<?>>entry:plugins.entryset())tryfinalclass<?extendsstrlookup>clazz=entry.getvalue().getpluginclass().assubclass(strlookup.class);if(!clazz.getname().equals("org.apache.logging.log4j.core.lookup.jndilookup"))strlookupmap.put(entry.getkey().tolowercase(),reflectionutil.instantiate(clazz));catch(finalthrowablet)handleerror(entry.getkey(),t);