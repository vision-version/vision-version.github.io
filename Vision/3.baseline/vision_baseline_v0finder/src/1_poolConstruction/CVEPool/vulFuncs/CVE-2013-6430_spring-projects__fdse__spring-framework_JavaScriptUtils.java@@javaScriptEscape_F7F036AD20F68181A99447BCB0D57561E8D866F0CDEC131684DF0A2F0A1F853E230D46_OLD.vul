if(input==null)returninput;stringbuilderfiltered=newstringbuilder(input.length());charprevchar='\u0000';charc;for(inti=0;i<input.length();i++)c=input.charat(i);if(c=='"')filtered.append("\\\"");elseif(c=='\'')filtered.append("\\'");elseif(c=='\\')filtered.append("\\\\");elseif(c=='/')filtered.append("\\/");elseif(c=='\t')filtered.append("\\t");elseif(c=='\n')if(prevchar!='\r')filtered.append("\\n");elseif(c=='\r')filtered.append("\\n");elseif(c=='\f')filtered.append("\\f");elsefiltered.append(c);prevchar=c;returnfiltered.tostring();