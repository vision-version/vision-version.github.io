propertyreferenceexceptionexception=null;propertypathcurrent=null;trycurrent=newpropertypath(source,type,base);if(!base.isempty())base.get(base.size()-1).next=current;list<propertypath>newbase=newarraylist<>(base);newbase.add(current);if(stringutils.hastext(addtail))current.next=create(addtail,current.actualtypeinformation,newbase);returncurrent;catch(propertyreferenceexceptione)if(current!=null)throwe;exception=e;patternpattern=pattern.compile("\\plu+\\pll*$");matchermatcher=pattern.matcher(source);if(matcher.find()&&matcher.start()!=0)intposition=matcher.start();stringhead=source.substring(0,position);stringtail=source.substring(position);tryreturncreate(head,type,tail+addtail,base);catch(propertyreferenceexceptione)throwe.hasdeeperresolutiondepththan(exception)?e:exception;throwexception;