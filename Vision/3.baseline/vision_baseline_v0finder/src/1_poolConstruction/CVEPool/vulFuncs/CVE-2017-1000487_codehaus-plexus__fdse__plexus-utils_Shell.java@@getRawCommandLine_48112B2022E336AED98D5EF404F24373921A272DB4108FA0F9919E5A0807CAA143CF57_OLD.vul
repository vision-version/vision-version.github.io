list<string>commandline=newarraylist<string>();stringbuildersb=newstringbuilder();if(executable!=null)stringpreamble=getexecutionpreamble();if(preamble!=null)sb.append(preamble);if(isquotedexecutableenabled())char[]escapechars=getescapechars(issinglequotedexecutableescaped(),isdoublequotedexecutableescaped());sb.append(stringutils.quoteandescape(getexecutable(),getexecutablequotedelimiter(),escapechars,getquotingtriggerchars(),'\\',false));elsesb.append(getexecutable());for(inti=0;i<arguments.length;i++)if(sb.length()>0)sb.append("");if(isquotedargumentsenabled())char[]escapechars=getescapechars(issinglequotedargumentescaped(),isdoublequotedargumentescaped());sb.append(stringutils.quoteandescape(arguments[i],getargumentquotedelimiter(),escapechars,getquotingtriggerchars(),getargumentescapepattern(),false));elsesb.append(arguments[i]);commandline.add(sb.tostring());returncommandline;