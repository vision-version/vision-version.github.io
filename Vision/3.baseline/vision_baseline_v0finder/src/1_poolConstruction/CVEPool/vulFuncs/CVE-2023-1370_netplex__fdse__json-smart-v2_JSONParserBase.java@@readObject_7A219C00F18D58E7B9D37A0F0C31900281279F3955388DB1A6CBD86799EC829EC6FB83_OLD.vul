if(c!='')thrownewruntimeexception("internalerror");if(++this.depth>max_depth)thrownewparseexception(pos,error_unexpected_json_depth,c);objectcurrent=mapper.createobject();booleanneeddata=false;booleanacceptdata=true;for(;;)read();switch(c)case'':case'\r':case'\t':case'\n':continue;case':':case']':case'[':case'':thrownewparseexception(pos,error_unexpected_char,c);case'':if(needdata&&!acceptuselesscomma)thrownewparseexception(pos,error_unexpected_char,(char)c);this.depth--;read();returnmapper.convert(current);case',':if(needdata&&!acceptuselesscomma)thrownewparseexception(pos,error_unexpected_char,(char)c);acceptdata=needdata=true;continue;case'"':case'\'':default:if(c=='\"'||c=='\'')readstring();elsereadnqstring(stopkey);if(!acceptnonquote)thrownewparseexception(pos,error_unexpected_token,xs);stringkey=xs;if(!acceptdata)thrownewparseexception(pos,error_unexpected_token,key);skipspace();if(c!=':')if(c==eoi)thrownewparseexception(pos-1,error_unexpected_eof,null);thrownewparseexception(pos-1,error_unexpected_char,c);readnoend();lastkey=key;objectvalue=readmain(mapper,stopvalue);mapper.setvalue(current,key,value);lastkey=null;skipspace();if(c=='')read();returnmapper.convert(current);if(c==eoi)thrownewparseexception(pos-1,error_unexpected_eof,null);if(c==',')acceptdata=needdata=true;elsethrownewparseexception(pos-1,error_unexpected_token,c);