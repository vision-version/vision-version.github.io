if(sourceinstanceofstreamsource)streamsourcestreamsource=(streamsource)source;inputsourceinputsource=newinputsource(streamsource.getinputstream());tryxmlreaderxmlreader=xmlreaderfactory.createxmlreader();stringfeaturename="http://xml.org/sax/features/external-general-entities";xmlreader.setfeature(featurename,this.processexternalentities);returnnewsaxsource(xmlreader,inputsource);catch(saxexceptionex)logger.warn("processingofexternalentitiescouldnotbedisabled",ex);returnsource;elsereturnsource;