super(request);httprequesthttprequest=newservletserverhttprequest(request);uricomponentsuricomponents=uricomponentsbuilder.fromhttprequest(httprequest).build();intport=uricomponents.getport();this.scheme=uricomponents.getscheme();this.secure="https".equals(this.scheme);this.host=uricomponents.gethost();this.port=(port==-1?(this.secure?443:80):port);stringbaseurl=this.scheme+"://"+this.host+(port==-1?"":":"+port);supplier<httpservletrequest>delegaterequest=()->(httpservletrequest)getrequest();this.forwardedprefixextractor=newforwardedprefixextractor(delegaterequest,baseurl);