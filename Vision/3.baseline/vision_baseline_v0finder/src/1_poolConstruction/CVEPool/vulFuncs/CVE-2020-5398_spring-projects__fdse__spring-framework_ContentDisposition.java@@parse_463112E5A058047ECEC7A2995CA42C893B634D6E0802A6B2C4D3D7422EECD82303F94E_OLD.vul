list<string>parts=tokenize(contentdisposition);stringtype=parts.get(0);stringname=null;stringfilename=null;charsetcharset=null;longsize=null;zoneddatetimecreationdate=null;zoneddatetimemodificationdate=null;zoneddatetimereaddate=null;for(inti=1;i<parts.size();i++)stringpart=parts.get(i);inteqindex=part.indexof('=');if(eqindex!=-1)stringattribute=part.substring(0,eqindex);stringvalue=(part.startswith("\"",eqindex+1)&&part.endswith("\"")?part.substring(eqindex+2,part.length()-1):part.substring(eqindex+1,part.length()));if(attribute.equals("name"))name=value;elseif(attribute.equals("filename*"))filename=decodeheaderfieldparam(value);charset=charset.forname(value.substring(0,value.indexof('\'')).trim());assert.istrue(utf_8.equals(charset)||iso_8859_1.equals(charset),"charsetshouldbeutf-8oriso-8859-1");elseif(attribute.equals("filename")&&(filename==null))filename=value;elseif(attribute.equals("size"))size=long.parselong(value);elseif(attribute.equals("creation-date"))trycreationdate=zoneddatetime.parse(value,rfc_1123_date_time);catch(datetimeparseexceptionex)elseif(attribute.equals("modification-date"))trymodificationdate=zoneddatetime.parse(value,rfc_1123_date_time);catch(datetimeparseexceptionex)elseif(attribute.equals("read-date"))tryreaddate=zoneddatetime.parse(value,rfc_1123_date_time);catch(datetimeparseexceptionex)elsethrownewillegalargumentexception("invalidcontentdispositionformat");returnnewcontentdisposition(type,name,filename,charset,size,creationdate,modificationdate,readdate);