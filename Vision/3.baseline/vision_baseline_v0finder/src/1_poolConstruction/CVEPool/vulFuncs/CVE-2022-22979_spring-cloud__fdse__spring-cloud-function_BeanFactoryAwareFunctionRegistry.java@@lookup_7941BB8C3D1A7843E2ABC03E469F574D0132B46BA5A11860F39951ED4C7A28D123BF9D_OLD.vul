"unchecked","rawtypes")@overridepublic<t>tlookup(class<?>type,stringfunctiondefinition,string...expectedoutputmimetypes)functiondefinition=stringutils.hastext(functiondefinition)?functiondefinition:this.applicationcontext.getenvironment().getproperty(functionproperties.function_definition,"");functiondefinition=this.normalizefunctiondefinition(functiondefinition);if(!stringutils.hastext(functiondefinition))logger.info("can'tdeterminedefaultfunctiondefinition.please"+"use'spring.cloud.function.definition'propertytoexplicitlydefineit.");returnnull;functioninvocationwrapperfunction=this.dolookup(type,functiondefinition,expectedoutputmimetypes);if(function==null)set<string>functionregistratioinnames=super.getnames(null);string[]functionnames=stringutils.delimitedlisttostringarray(functiondefinition.replaceall(",","|").trim(),"|");for(stringfunctionname:functionnames)if(functionregistratioinnames.contains(functionname)&&logger.isdebugenabled())logger.debug("skippingfunction'"+functionname+"'sinceitisalreadypresent");elseobjectfunctioncandidate=this.discoverfunctioninbeanfactory(functionname);if(functioncandidate!=null)typefunctiontype=null;functionregistrationfunctionregistration=null;if(functioncandidateinstanceoffunctionregistration)functionregistration=(functionregistration)functioncandidate;elseif(this.isfunctionpojo(functioncandidate,functionname))methodfunctionalmethod=functiontypeutils.discoverfunctionalmethod(functioncandidate.getclass());functioncandidate=this.proxytarget(functioncandidate,functionalmethod);functiontype=functiontypeutils.fromfunctionmethod(functionalmethod);elseif(this.isspecialfunctionregistration(functionnames,functionname))functionregistration=this.applicationcontext.getbean(functionname+functionregistration.registration_name_suffix,functionregistration.class);elsefunctiontype=functiontypeutils.discoverfunctiontype(functioncandidate,functionname,this.applicationcontext);if(functionregistration==null)functionregistration=newfunctionregistration(functioncandidate,functionname).type(functiontype);if(functionregistration!=null)this.register(functionregistration);elseif(logger.isdebugenabled())logger.debug("function'"+functionname+"'isnotavailableinfunctioncatalogorbeanfactory");function=super.dolookup(type,functiondefinition,expectedoutputmimetypes);return(t)function;