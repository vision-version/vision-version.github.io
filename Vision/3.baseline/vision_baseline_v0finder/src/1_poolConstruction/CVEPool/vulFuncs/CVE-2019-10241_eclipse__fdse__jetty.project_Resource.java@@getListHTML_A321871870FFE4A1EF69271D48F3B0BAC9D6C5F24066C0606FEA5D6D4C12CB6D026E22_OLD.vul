base=uriutil.canonicalpath(base);if(base==null||!isdirectory())returnnull;string[]ls=list();if(ls==null)returnnull;arrays.sort(ls);stringdecodedbase=uriutil.decodepath(base);stringtitle="directory:"+detag(decodedbase);stringbuilderbuf=newstringbuilder(4096);buf.append("<html><head>");buf.append("<linkhref=\"").append("jetty-dir.css").append("\"rel=\"stylesheet\"type=\"text/css\"/><title>");buf.append(title);buf.append("</title></head><body>\n<h1>");buf.append(title);buf.append("</h1>\n<tableborder=0>\n");if(parent)buf.append("<tr><td><ahref=\"");buf.append(uriutil.addpaths(base,"../"));buf.append("\">parentdirectory</a></td><td></td><td></td></tr>\n");stringencodedbase=hrefencodeuri(base);dateformatdfmt=dateformat.getdatetimeinstance(dateformat.medium,dateformat.medium);for(inti=0;i<ls.length;i++)resourceitem=addpath(ls[i]);buf.append("\n<tr><td><ahref=\"");stringpath=uriutil.addpaths(encodedbase,uriutil.encodepath(ls[i]));buf.append(path);if(item.isdirectory()&&!path.endswith("/"))buf.append(uriutil.slash);buf.append("\">");buf.append(detag(ls[i]));buf.append("&nbsp;");buf.append("</a></td><tdalign=right>");buf.append(item.length());buf.append("bytes&nbsp;</td><td>");buf.append(dfmt.format(newdate(item.lastmodified())));buf.append("</td></tr>");buf.append("</table>\n");buf.append("</body></html>\n");returnbuf.tostring();