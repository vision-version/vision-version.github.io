if(!_dirallowed)response.senderror(httpservletresponse.sc_forbidden);return;byte[]data=null;stringbase=uriutil.addpaths(request.getrequesturi(),uriutil.slash);if(_resourcebase!=null)if(_resourcebaseinstanceofresourcecollection)resource=_resourcebase.addpath(pathincontext);elseif(_contexthandler.getbaseresource()instanceofresourcecollection)resource=_contexthandler.getbaseresource().addpath(pathincontext);stringdir=resource.getlisthtml(base,pathincontext.length()>1);if(dir==null)response.senderror(httpservletresponse.sc_forbidden,"nodirectory");return;data=dir.getbytes("utf-8");response.setcontenttype("text/html;charset=utf-8");response.setcontentlength(data.length);response.getoutputstream().write(data);