string[]functionnames=stringutils.delimitedlisttostringarray(functiondefinition.replaceall(",","|").trim(),"|");functioninvocationwrappercomposedfunction=null;for(stringfunctionname:functionnames)functioninvocationwrapperfunction=this.findfunctioninfunctionregistrations(functionname);if(function==null)returnnull;elseif(composedfunction==null)composedfunction=function;elsefunctioninvocationwrapperandthenfunction=invocationwrapperinstance(functionname,function.gettarget(),function.inputtype,function.outputtype);composedfunction=(functioninvocationwrapper)composedfunction.andthen((function<object,object>)andthenfunction);composedfunction=this.enrichinputifnecessary(composedfunction);composedfunction=this.enrichoutputifnecessary(composedfunction);if(composedfunction.issingleton)this.wrappedfunctiondefinitions.put(composedfunction.functiondefinition,composedfunction);if(logger.isdebugenabled())logger.debug("composedfunction"+composedfunction);returncomposedfunction;