if(stringutils.isblank(notepath))notepath="/untitlednote";if(!notepath.startswith("/"))notepath="/"+notepath;notepath=notepath.replace("\r","").replace("\n","");intpos=notepath.lastindexof("/");if((notepath.length()-pos)>255)thrownewioexception("notenamemustbelessthan255");if(notepath.contains(".."))thrownewioexception("notenamecannotcontain'..'");returnnotepath;