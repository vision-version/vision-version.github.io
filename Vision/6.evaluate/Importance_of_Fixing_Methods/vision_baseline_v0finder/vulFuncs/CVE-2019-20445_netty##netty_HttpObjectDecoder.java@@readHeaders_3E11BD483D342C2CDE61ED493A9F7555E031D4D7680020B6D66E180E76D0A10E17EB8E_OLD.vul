finalhttpmessagemessage=this.message;finalhttpheadersheaders=message.headers();appendablecharsequenceline=headerparser.parse(buffer);if(line==null)returnnull;if(line.length()>0)docharfirstchar=line.charatunsafe(0);if(name!=null&&(firstchar==''||firstchar=='\t'))stringtrimmedline=line.tostring().trim();stringvaluestr=string.valueof(value);value=valuestr+''+trimmedline;elseif(name!=null)headers.add(name,value);splitheader(line);line=headerparser.parse(buffer);if(line==null)returnnull;while(line.length()>0);if(name!=null)headers.add(name,value);name=null;value=null;statenextstate;if(iscontentalwaysempty(message))httputil.settransferencodingchunked(message,false);nextstate=state.skip_control_chars;elseif(httputil.istransferencodingchunked(message))nextstate=state.read_chunk_size;elseif(contentlength()>=0)nextstate=state.read_fixed_length_content;elsenextstate=state.read_variable_length_content;returnnextstate;