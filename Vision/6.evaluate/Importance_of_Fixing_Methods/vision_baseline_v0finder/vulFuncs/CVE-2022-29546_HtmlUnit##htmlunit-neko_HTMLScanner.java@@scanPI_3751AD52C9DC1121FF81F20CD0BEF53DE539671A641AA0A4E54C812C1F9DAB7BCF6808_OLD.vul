if(debug_buffer)fcurrententity.debugbufferifneeded("(scanpi:");if(freporterrors)ferrorreporter.reportwarning("html1008",null);finalstringtarget=scanname(true);if(target!=null&&!target.equalsignorecase("xml"))while(true)intc=fcurrententity.read();if(c=='\r'||c=='\n')if(c=='\r')c=fcurrententity.read();if(c!='\n')fcurrententity.offset--;fcurrententity.characteroffset_--;fcurrententity.incline();continue;if(c==-1)break;if(c!=''&&c!='\t')fcurrententity.rewind();break;fstringbuffer.clear();while(true)intc=fcurrententity.read();if(c=='?'||c=='/')finalcharc0=(char)c;c=fcurrententity.read();if(c=='>')break;fstringbuffer.append(c0);fcurrententity.rewind();continue;elseif(c=='\r'||c=='\n')fstringbuffer.append('\n');if(c=='\r')c=fcurrententity.read();if(c!='\n')fcurrententity.offset--;fcurrententity.characteroffset_--;fcurrententity.incline();continue;elseif(c==-1)break;elseif(c=='>')if(fdocumenthandler!=null)fstringbuffer.append(target);fendlinenumber=fcurrententity.getlinenumber();fendcolumnnumber=fcurrententity.getcolumnnumber();fendcharacteroffset=fcurrententity.getcharacteroffset();fdocumenthandler.comment(fstringbuffer,locationaugs());return;elseappendchar(fstringbuffer,c,null);finalxmlstringdata=fstringbuffer;if(fdocumenthandler!=null)fendlinenumber=fcurrententity.getlinenumber();fendcolumnnumber=fcurrententity.getcolumnnumber();fendcharacteroffset=fcurrententity.getcharacteroffset();fdocumenthandler.processinginstruction(target,data,locationaugs());elsefinalintbeginlinenumber=fbeginlinenumber;finalintbegincolumnnumber=fbegincolumnnumber;finalintbegincharacteroffset=fbegincharacteroffset;fattributes.removeallattributes();intaindex=0;while(scanpseudoattribute(fattributes))if(fattributes.getvalue(aindex).length()==0)fattributes.removeattributeat(aindex);elsefattributes.getname(aindex,fqname);fqname.rawname=fqname.rawname.tolowercase(locale.root);fattributes.setname(aindex,fqname);aindex++;if(fdocumenthandler!=null)finalstringversion=fattributes.getvalue("version");finalstringencoding=fattributes.getvalue("encoding");finalstringstandalone=fattributes.getvalue("standalone");finalbooleanxmldeclnow=fignorespecifiedcharset||!changeencoding(encoding);if(xmldeclnow)fbeginlinenumber=beginlinenumber;fbegincolumnnumber=begincolumnnumber;fbegincharacteroffset=begincharacteroffset;fendlinenumber=fcurrententity.getlinenumber();fendcolumnnumber=fcurrententity.getcolumnnumber();fendcharacteroffset=fcurrententity.getcharacteroffset();fdocumenthandler.xmldecl(version,encoding,standalone,locationaugs());if(debug_buffer)fcurrententity.debugbufferifneeded(")scanpi:");