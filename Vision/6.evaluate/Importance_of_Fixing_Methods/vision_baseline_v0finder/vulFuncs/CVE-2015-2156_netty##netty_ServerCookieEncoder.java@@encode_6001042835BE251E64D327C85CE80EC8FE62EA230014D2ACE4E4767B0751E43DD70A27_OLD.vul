if(cookie==null)thrownewnullpointerexception("cookie");finalstringname=cookie.name();finalstringvalue=cookie.value()!=null?cookie.value():"";validatecookie(name,value);stringbuilderbuf=newstringbuilder();if(cookie.wrap())addquoted(buf,name,value);elseadd(buf,name,value);if(cookie.maxage()!=long.min_value)add(buf,cookieheadernames.max_age,cookie.maxage());dateexpires=newdate(cookie.maxage()*1000+system.currenttimemillis());add(buf,cookieheadernames.expires,httpheaderdateformat.get().format(expires));if(cookie.path()!=null)add(buf,cookieheadernames.path,cookie.path());if(cookie.domain()!=null)add(buf,cookieheadernames.domain,cookie.domain());if(cookie.issecure())add(buf,cookieheadernames.secure);if(cookie.ishttponly())add(buf,cookieheadernames.httponly);returnstriptrailingseparator(buf);