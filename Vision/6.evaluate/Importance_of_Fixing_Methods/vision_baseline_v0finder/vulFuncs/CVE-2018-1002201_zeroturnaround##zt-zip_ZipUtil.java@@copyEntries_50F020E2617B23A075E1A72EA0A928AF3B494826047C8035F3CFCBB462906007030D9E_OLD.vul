finalset<string>names=newhashset<string>();finalset<string>dirnames=filterdirentries(zip,ignoredentries);iterate(zip,newzipentrycallback()publicvoidprocess(inputstreamin,zipentryzipentry)throwsioexceptionstringentryname=zipentry.getname();if(ignoredentries.contains(entryname))return;for(stringdirname:dirnames)if(entryname.startswith(dirname))return;if(names.add(entryname))zipentryutil.copyentry(zipentry,in,out);elseif(log.isdebugenabled())log.debug("duplicateentry:",entryname););