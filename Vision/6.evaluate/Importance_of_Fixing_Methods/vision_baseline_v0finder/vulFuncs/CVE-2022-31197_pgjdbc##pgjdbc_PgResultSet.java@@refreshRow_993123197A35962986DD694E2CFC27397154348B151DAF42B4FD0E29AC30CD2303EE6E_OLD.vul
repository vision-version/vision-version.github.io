checkupdateable();if(oninsertrow)thrownewpsqlexception(gt.tr("can''trefreshtheinsertrow."),psqlstate.invalid_cursor_state);if(isbeforefirst()||isafterlast()||castnonnull(rows,"rows").isempty())return;stringbuilderselectsql=newstringbuilder("select");resultsetmetadatarsmd=getmetadata();pgresultsetmetadatapgmd=(pgresultsetmetadata)rsmd;for(inti=1;i<=rsmd.getcolumncount();i++)if(i>1)selectsql.append(",");selectsql.append(pgmd.getbasecolumnname(i));selectsql.append("from").append(onlytable).append(tablename).append("where");list<primarykey>primarykeys=castnonnull(this.primarykeys,"primarykeys");intnumkeys=primarykeys.size();for(inti=0;i<numkeys;i++)primarykeyprimarykey=primarykeys.get(i);selectsql.append(primarykey.name).append("=?");if(i<numkeys-1)selectsql.append("and");stringsqltext=selectsql.tostring();if(connection.getlogger().isloggable(level.fine))connection.getlogger().log(level.fine,"selecting0",sqltext);preparedstatementselectstatement=null;tryselectstatement=connection.preparestatement(sqltext,resultset.type_scroll_insensitive,resultset.concur_updatable);for(inti=0;i<numkeys;i++)selectstatement.setobject(i+1,primarykeys.get(i).getvalue());pgresultsetrs=(pgresultset)selectstatement.executequery();if(rs.next())if(rs.thisrow==null)rowbuffer=null;elserowbuffer=castnonnull(rs.thisrow).updateablecopy();castnonnull(rows).set(currentrow,castnonnull(rowbuffer));thisrow=rowbuffer;connection.getlogger().log(level.fine,"doneupdates");rs.close();finallyjdbcblackhole.close(selectstatement);