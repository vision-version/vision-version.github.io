        byte[] bytes = new byte[length];
        int bytesRead = 0;
        do
        {
            int count = read(bytes, bytesRead, length - bytesRead);
            if (count < 0)
                throw new EOFException();
            bytesRead += count;
        } while (bytesRead < length);
        return bytes;
