lock.lock();try@suppresswarnings("unchecked")mmanager=(m)map.get(name);if(manager==null)manager=factory.createmanager(name,data);if(manager==null)thrownewillegalstateexception("managerfactory["+factory+"]unabletocreatemanagerfor["+name+"]withdata["+data+"]");map.put(name,manager);elsemanager.updatedata(data);manager.count++;returnmanager;finallylock.unlock();