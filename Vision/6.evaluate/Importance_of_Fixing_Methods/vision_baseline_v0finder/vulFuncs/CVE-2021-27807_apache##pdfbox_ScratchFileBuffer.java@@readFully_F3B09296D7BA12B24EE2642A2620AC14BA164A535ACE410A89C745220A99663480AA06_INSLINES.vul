    public byte[] readFully(int length) throws IOException
        byte[] bytes = new byte[length];
        int bytesRead = 0;
            int count = read(bytes, bytesRead, length - bytesRead);
            bytesRead += count;
        } while (bytesRead < length);
        return bytes;
