stringpath=event.getlocation().getpath();stringadditionalinfo="";if(parameter.hascustommessage())additionalinfo="reason:"+parameter.getcustommessage();path=jsoup.clean(path,whitelist.none());additionalinfo=jsoup.clean(additionalinfo,whitelist.none());booleanproductionmode=event.getui().getsession().getconfiguration().isproductionmode();stringtemplate=geterrorhtml(productionmode);template=template.replace("path",path);template=template.replace("additionalinfo",additionalinfo);if(template.contains("routes"))template=template.replace("routes",getroutes(event));getelement().appendchild(newhtml(template).getelement());returnhttpservletresponse.sc_not_found;