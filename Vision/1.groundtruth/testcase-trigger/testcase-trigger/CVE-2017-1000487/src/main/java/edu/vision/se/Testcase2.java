package edu.vision.se;

import org.codehaus.plexus.util.StringUtils;
import org.codehaus.plexus.util.cli.shell.BourneShell;
import org.codehaus.plexus.util.cli.shell.Shell;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class Testcase2 {
    protected Shell newShell() {
        return new BourneShell();
    }

    @Test
    public void testQuoteWorkingDirectoryAndExecutable_WDPathWithSingleQuotes() {
        Shell sh = newShell();

        sh.setWorkingDirectory("/usr/local/'something else'");
        sh.setExecutable("chmod");

        String executable = StringUtils.join(sh.getShellCommandLine(new String[]{}).iterator(), " ");

        assertEquals("/bin/sh -c cd '/usr/local/'\"'\"'something else'\"'\"'' && 'chmod'", executable);
    }
}
