package edu.vision.se;

import static org.assertj.core.api.Assertions.assertThat;

import java.io.Serializable;
import java.util.Collections;

import org.junit.Test;
import org.springframework.amqp.core.Message;
import org.springframework.amqp.core.MessageProperties;
import org.springframework.amqp.support.converter.SimpleMessageConverter;

public class Testcase1 {
    @Test
    public void fooNotDeserialized() {
        Message message = new SimpleMessageConverter().toMessage(new Foo(), new MessageProperties());
        // assertThat(message.toString()).doesNotContainPattern("aFoo");
        Message listMessage = new SimpleMessageConverter().toMessage(Collections.singletonList(new Foo()),
                new MessageProperties());
        // assertThat(listMessage.toString()).doesNotContainPattern("aFoo");
        assertThat(message.toString()).contains("[serialized object]");
        assertThat(listMessage.toString()).contains("[serialized object]");

    }

    @SuppressWarnings("serial")
    public static class Foo implements Serializable {

        @Override
        public String toString() {
            return "aFoo";
        }

    }
}