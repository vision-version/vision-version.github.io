
package edu.vision.se;

import org.apache.maven.shared.utils.StringUtils;
import org.apache.maven.shared.utils.cli.shell.BourneShell;
import org.apache.maven.shared.utils.cli.shell.Shell;
import org.junit.Test;

import java.util.List;

import static org.junit.Assert.assertTrue;

public class Testcase5 {

    @Test(timeout = 60000)
    public void testAddSingleQuotesOnArgumentWithSpaces() {
        Shell sh = new BourneShell();

        sh.setWorkingDirectory("/usr/bin");
        sh.setExecutable("chmod");

        String[] args = {"some arg with spaces"};

        List<String> shellCommandLine = sh.getShellCommandLine(args);
        validateReturnValue(shellCommandLine);
    }

    public void validateReturnValue(List<String> shellCommandLine) {
        String cli = StringUtils.join(shellCommandLine.iterator(), " ");
        assertTrue(cli.endsWith("'some arg with spaces'"));
    }

}