package edu.vision.se;

import org.apache.maven.shared.utils.cli.Commandline;
import org.apache.maven.shared.utils.cli.shell.BourneShell;
import org.junit.Test;

import java.util.List;

import static org.junit.Assert.assertEquals;

public class Testcase8 {

    @Test(timeout = 60000)
    public void testBourneShellQuotingCharacters()
            throws Exception {
        // { ' ', '$', ';', '&', '|', '<', '>', '*', '?', '(', ')' };
        // test with values http://steve-parker.org/sh/bourne.shtml Appendix B - Meta-characters and Reserved Words
        Commandline commandline = new Commandline(new BourneShell());
        commandline.setExecutable("chmod");
        commandline.getShell().setQuotedArgumentsEnabled(true);
        commandline.createArg().setValue(" ");
        commandline.createArg().setValue("|");
        commandline.createArg().setValue("&&");
        commandline.createArg().setValue("||");
        commandline.createArg().setValue(";");
        commandline.createArg().setValue(";;");
        commandline.createArg().setValue("&");
        commandline.createArg().setValue("()");
        commandline.createArg().setValue("<");
        commandline.createArg().setValue("<<");
        commandline.createArg().setValue(">");
        commandline.createArg().setValue(">>");
        commandline.createArg().setValue("*");
        commandline.createArg().setValue("?");
        commandline.createArg().setValue("[");
        commandline.createArg().setValue("]");
        commandline.createArg().setValue("{");
        commandline.createArg().setValue("}");
        commandline.createArg().setValue("`");
        commandline.createArg().setValue("#");

        List<String> lines = commandline.getShell().getShellCommandLine(commandline.getArguments());
        System.out.println(lines);

        assertEquals("'chmod' ' ' '|' '&&' '||' ';' ';;' '&' '()' '<' '<<' '>' '>>' '*' '?' '[' ']' '{' '}' '`' '#'",
                lines.get(2));
    }

}