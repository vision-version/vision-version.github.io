package edu.vision.se;

import org.apache.maven.shared.utils.StringUtils;
import org.apache.maven.shared.utils.cli.shell.BourneShell;
import org.apache.maven.shared.utils.cli.shell.Shell;
import org.junit.Test;

import java.util.List;

import static org.junit.Assert.assertEquals;

public class Testcase1 {

    @Test(timeout = 60000)
    public void testQuoteWorkingDirectoryAndExecutable() {
        Shell sh = new BourneShell();

        sh.setWorkingDirectory("/usr/local/bin");
        sh.setExecutable("chmod");

        List<String> shellCommandLine = sh.getShellCommandLine(new String[]{});

        validateReturnValue(shellCommandLine);
    }

    public void validateReturnValue(List<String> shellCommandLine) {
        String executable = StringUtils.join(shellCommandLine.iterator(), " ");
        assertEquals("/bin/sh -c cd '/usr/local/bin' && 'chmod'", executable);
    }
}