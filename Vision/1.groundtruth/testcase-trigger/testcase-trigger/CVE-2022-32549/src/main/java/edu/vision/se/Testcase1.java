package edu.vision.se;

import static org.junit.Assert.assertTrue;

import java.io.PrintWriter;
import java.io.StringWriter;

import org.apache.sling.api.request.builder.impl.RequestProgressTrackerImpl;
import org.junit.Before;
import org.junit.Test;

public class Testcase1 {
    private RequestProgressTrackerImpl tracker;

    @Before
    public void setup() {
        tracker = new RequestProgressTrackerImpl();
    }

    @Test
    public void testMessageEscape() {
        tracker.log("foo\n\rbar");
        final StringWriter w = new StringWriter();
        tracker.dump(new PrintWriter(w));
        w.flush();
        final String result = w.toString();
        assertTrue(result.contains("LOG foo__bar"));
    }
}