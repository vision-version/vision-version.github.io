package edu.vision.se;


import org.jboss.netty.handler.codec.http.Cookie;
import org.jboss.netty.handler.codec.http.CookieDecoder;
import org.junit.Test;

import java.util.Iterator;
import java.util.Set;

import static org.junit.Assert.*;

public class Testcase1 {

    @Test(timeout = 60000)
    public void testDecodingClientSideCookies() {
        String source = "$Version=\"1\"; " +
                "Part_Number=\"Riding_Rocket_0023\"; $Path=\"/acme/ammo\"; " +
                "Part_Number=\"Rocket_Launcher_0001\"; $Path=\"/acme\"";

        Set<Cookie> cookies = new CookieDecoder().decode(source);
        validateReturnValue(cookies);
    }


    public void validateReturnValue(Set<Cookie> cookies) {
        Iterator<org.jboss.netty.handler.codec.http.Cookie> it = cookies.iterator();
        Cookie c;
        assertTrue(it.hasNext());
        c = it.next();
        assertEquals(Integer.MIN_VALUE, c.getMaxAge());

        assertTrue(it.hasNext());
        c = it.next();
        assertEquals(Integer.MIN_VALUE, c.getMaxAge());

        assertFalse(it.hasNext());
    }
}