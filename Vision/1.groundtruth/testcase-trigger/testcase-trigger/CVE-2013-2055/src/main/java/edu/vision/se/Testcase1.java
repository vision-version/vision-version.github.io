package edu.vision.se;

import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.fail;

import org.apache.wicket.markup.html.PackageResourceGuard;
import org.apache.wicket.markup.html.WebComponent;
import org.junit.Test;

public class Testcase1 {

    @Test
    public void testMarkup() throws Exception {
        PackageResourceGuardChind guard = new PackageResourceGuardChind();

        assertNotNull(getClass().getResource(
                "/edu/vision/se/Testcase1$MyClass.class"));

        try {
            assertFalse(guard.acceptAbsolutePath("edu/vision/se/Testcase1$MyClass.html"));
            assertFalse(guard.acceptAbsolutePath("edu/vision/se/Testcase1$MyClass_de.html"));
            assertFalse(guard.acceptAbsolutePath(
                    "edu/vision/se/Testcase1$MyClass_SomeHTMLSnippetIWantServed.html"));
            assertFalse(guard.acceptAbsolutePath(
                    "edu/vision/se/Testcase1$MyOtherClass_WithCrazyName.html"));
            assertFalse(guard.acceptAbsolutePath(
                    "edu/vision/se/Testcase1$MyOtherClass_WithCrazyName_de.html"));
            assertFalse(guard.acceptAbsolutePath(
                    "edu/vision/se/Testcase1$MyOtherClass_WithCrazyName_en.html"));
            // assertTrue(guard.acceptAbsolutePath("edu/vision/se/Testcase1$MyOtherClass.html"));
        } catch (Exception e) {
            fail();
        }

    }

    private class MyClass extends WebComponent {

        public MyClass(String id) {
            super(id);
        }
    }

    private class MyOtherClass_WithCrazyName extends WebComponent {

        public MyOtherClass_WithCrazyName(String id) {
            super(id);
        }
    }
}

class PackageResourceGuardChind extends PackageResourceGuard {
    public boolean acceptAbsolutePath(String path) {
        return super.acceptAbsolutePath(path);
    }
}