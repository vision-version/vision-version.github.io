package edu.vision.se;
import org.apache.dolphinscheduler.common.job.db.MySQLDataSource;
import org.junit.Assert;
import org.junit.Test;

// 受影响版本：1.2.0, 1.2.1（受影响版本为dolphinscheduler-common）
// 1.3.0 及以上版本受影响组件迁移为：dolphinscheduler-dao，且打了补丁，不受影响


public class Testcase1 {

    @Test
    public void testGetUser(){
        MySQLDataSource dataSource = new MySQLDataSource();
        String safeUsername= "test123";
        dataSource.setUser(safeUsername);
        Assert.assertEquals("test123", dataSource.getUser());
        String sensitiveUsername= "test123?autoDeserialize=true";
        dataSource.setUser(sensitiveUsername);
        Assert.assertEquals("test123?", dataSource.getUser());
    }

    @Test
    public void testGetPassword(){
        MySQLDataSource dataSource = new MySQLDataSource();
        String safePwd= "test_pwd";
        dataSource.setPassword(safePwd);
        Assert.assertEquals("test_pwd", dataSource.getPassword());
        String sensitivePwd= "test_pwd?autoDeserialize=true";
        dataSource.setPassword(sensitivePwd);
        Assert.assertEquals("test_pwd?", dataSource.getPassword());
    }
}