diff --git a/./github_diff/CVE-2024-31860/oldfiles/NotebookService.java b/./github_diff/CVE-2024-31860/newfiles/NotebookService.java
index 9a4418b..fc09c3c 100644
--- a/./github_diff/CVE-2024-31860/oldfiles/NotebookService.java
+++ b/./github_diff/CVE-2024-31860/newfiles/NotebookService.java
@@ -3,6 +3,8 @@ import static org.apache.zeppelin.conf.ZeppelinConfiguration.ConfVars.ZEPPELIN_N
 import static org.apache.zeppelin.interpreter.InterpreterResult.Code.ERROR;
 import static org.apache.zeppelin.scheduler.Job.Status.ABORT;
 import java.io.IOException;
+import java.net.URLDecoder;
+import java.nio.charset.StandardCharsets;
 import java.text.ParseException;
 import java.text.SimpleDateFormat;
 import java.time.Instant;
@@ -160,6 +162,11 @@ public class NotebookService {
     }
     
     notePath = notePath.replace("\r", " ").replace("\n", " ");
+    notePath = URLDecoder.decode(notePath, StandardCharsets.UTF_8.toString());
+    if (notePath.endsWith("/")) {
+      throw new IOException("Note name shouldn't end with '/'");
+    }
+    
     int pos = notePath.lastIndexOf("/");
     if ((notePath.length() - pos) > 255) {
       throw new IOException("Note name must be less than 255");
