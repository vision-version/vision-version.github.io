diff --git a/./github_diff/CVE-2021-44228/oldfiles/JndiContextSelector.java b/./github_diff/CVE-2021-44228/newfiles/JndiContextSelector.java
index df86325..bc3a999 100644
--- a/./github_diff/CVE-2021-44228/oldfiles/JndiContextSelector.java
+++ b/./github_diff/CVE-2021-44228/newfiles/JndiContextSelector.java
@@ -16,6 +16,13 @@ public class JndiContextSelector implements NamedContextSelector {
     private static final LoggerContext CONTEXT = new LoggerContext("Default");
     private static final ConcurrentMap<String, LoggerContext> CONTEXT_MAP = new ConcurrentHashMap<>();
     private static final StatusLogger LOGGER = StatusLogger.getLogger();
+    public JndiContextSelector() {
+        if (!JndiManager.isJndiEnabled()) {
+            throw new IllegalStateException("JNDI must be enabled by setting log4j2.enableJndi=true");
+        }
+        
+    }
+    
     @Override
     public LoggerContext getContext(final String fqcn, final ClassLoader loader, final boolean currentContext) {
         return getContext(fqcn, loader, currentContext, null);
